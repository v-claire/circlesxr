 <html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->
    <script src="/worlds/TOTL_space/script/SpaceRoom.js"></script>
    <script src="/worlds/TOTL_space/script/pinpad.js"></script>
    
  </head>  
  <body>
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <a-scene circles_scene_properties>
      <a-assets>
        <!-- images -->
        <img id='skyMap' src='/worlds/TOTL_space/assets/textures/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">
        <!-- ^ credit: Poly Haven @ https://polyhaven.com/a/moonless_golf -->
        <img id="AS_img" src="/worlds/TOTL_space/assets/images/AS_logo.png" crossorigin="anonymous">
        <!-- ^ credit: Ingenium @ https://ingeniumcanada.org/ -->
        <img id="AS_wall_img" src="/worlds/TOTL_space/assets/textures/AS_walls.png" crossorigin="anonymous">
        <!-- ^ credit: flaticon @ https://www.flaticon.com/ -->
        <img id="constellation_img" src="/worlds/TOTL_space/assets/images/constellation_monitor.png" crossorigin="anonymous">
        <img id="radio_img" src="/worlds/TOTL_space/assets/images/radioInstructions.png" crossorigin="anonymous">
        <img id="telescope_img" src="/worlds/TOTL_space/assets/images/telescopeInstructions.png" crossorigin="anonymous">


        <!-- sound effects-->

        
        <!-- room models -->
        <a-asset-item id="room_model" src="/worlds/TOTL_space/assets/models/room.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <a-asset-item id="radio_model" src="/worlds/TOTL_space/assets/models/aviationSpaceRadio.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="radioDial_model" src="/worlds/TOTL_space/assets/models/aviationSpaceRadioDial.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="chair_model" src="/worlds/TOTL_space/assets/models/chair.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="constellation_model" src="/worlds/TOTL_space/assets/models/constellation.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lighthouse_model" src="/worlds/TOTL_space/assets/models/lighthouse.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lighthouseOff_model" src="/worlds/TOTL_space/assets/models/lighthouseOff.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="monitor_model" src="/worlds/TOTL_space/assets/models/monitor.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="plane_model" src="/worlds/TOTL_space/assets/models/plane.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="table_model" src="/worlds/TOTL_space/assets/models/table.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="telescope_model" src="/worlds/TOTL_space/assets/models/telescope.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="terminal_model" src="/worlds/TOTL_space/assets/models/terminal.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="propeller_3blades_model" src="/worlds/TOTL_space/assets/models/threeBladedPropeller.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="propeller_2blades_model" src="/worlds/TOTL_space/assets/models/twoBladedPropeller.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="keyPad_model" src="/worlds/TOTL_space/assets/models/keyPad.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!--<a-asset-item id="car_model" src="/worlds/TOTL_space//worlds/TOTL_space/assets/models/car.glb" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>-->
        <audio id="static" src="/worlds/TOTL_space/assets/sounds/static.wav" ></audio>
        <audio id="music" src="/worlds/TOTL_space/assets/sounds/radioMusic.wav" ></audio>
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>
      <!--------------- ^ ADD THIS BACK IN ^ ----------------------------------------->
      <!------------------------------------------------------------------------------>
      <!------------------------------------------------------------------------------>

      <!-- circles checkpoints -->
      <a-entity circles-checkpoint position="0 -0.39 -0.5"></a-entity>
      <a-entity circles-checkpoint position="3.4 -0.39 4.8"></a-entity>
      <a-entity circles-checkpoint position="3 -0.39 -4.1"></a-entity>
      <a-entity circles-checkpoint position="-3 -0.39 -3"></a-entity>
      <a-entity circles-checkpoint position="-2 -0.39 6"></a-entity>
      <a-entity circles-checkpoint position="-5 -0.39 -6.7"></a-entity>


      <!--<a-entity id="car" position="0 0 0" scale="60 60 60"rotation="0 25 0" gltf-model="#car_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>-->

      <!-- load room models -->
      <a-entity id="room" position="0 -0.5 0" gltf-model="#room_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
      <a-image position="-6.35 3.5 -6.7" rotation="0 90 0" src="#AS_img" width="1.5" height="1.5"></a-image>
      <!--<a-image position="-0.75 3.5 10" rotation="0 0 0" src="#AS_img" width="3" height="3"></a-image>-->
      <a-image position="-5.12 2.5 2.2" rotation="0 90 0" src="#AS_wall_img" width="15.5" height="6.5"></a-image>
      <a-entity id="lighthouse" position="20 -4 20" scale="20 20 20" gltf-model="#lighthouseOff_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>


      <!-- desk -->
      <a-entity id="chair" position="2 -0.5 -7.5" scale="30 30 30" gltf-model="#chair_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
      <a-entity id="table" position="2 -0.5 -6" scale="30 30 30" gltf-model="#table_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>    
          <a-entity id="plane"
          circles-artefact="inspectScale: 35 35 35;
            label_on: false;
            description_on: false;"
          position="3 0.7 -5.2" circles-interactive-object="type:highlight" rotation="0 -80 0" scale="30 30 30" gltf-model="#plane_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>

      <!-- propellers -->
      <a-entity position="-3 2.5 -10" rotation="0 0 40" scale="30 30 30" gltf-model="#propeller_2blades_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
      <a-entity position="0 2.5 -10" rotation="0 0 -10" scale="30 30 30" gltf-model="#propeller_3blades_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
      <a-entity position="3 2.5 -10" rotation="0 0 -20" scale="30 30 30" gltf-model="#propeller_2blades_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>


      <!-- radio -->
      <a-entity position="-4.5 0.15 -3" geometry="primitive:box; height:1.3; width:0.8; depth:2.2;" material="color:gray;" circles-sphere-env-map="src:#skyMap" shadow="case:true; receive:true;">
        <a-image position="0.41 0 -0.1" rotation="0 90 0" src="#radio_img" width="2.5" height="1.5"></a-image></a-entity>
        <a-entity id="radio" position="-4.5 0.8 -3" rotation="0 90 0" scale="100 100 100" gltf-model="#radio_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
            <a-entity id="radioDial" position="-4.3 1.07 -3.260" rotation="0 90 0" scale="100 100 100" gltf-model="#radioDial_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;" circles-interactive-object="type:highlight" rotate-dial="dialPos:90;"></a-entity>
            <a-entity id="staticSound" circles-sound="type:music; src:#static; autoplay:false; loop:true; volume:0.02;"></a-entity>
            <a-entity id="musicSound" circles-sound="type:music; src:#music; autoplay:false; loop:true; volume:0.02;"></a-entity>


      <!-- telescope -->
      <a-entity position="0 0.15 1" geometry="primitive:box; height:1.3; width:3; depth:1;" material="color:gray;" circles-sphere-env-map="src:#skyMap" shadow="case:true; receive:true;">
        <a-image position="0 0 -0.51" rotation="0 180 0" src="#telescope_img" width="2.5" height="1.5"></a-image></a-entity>
        <a-entity id="telescope" rotation="0 180 0" position="0 0.8 1" scale="30 30 30" gltf-model="#telescope_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
        <a-entity id="monitor" rotation="0 90 0" position="1 0.8 1" scale="30 30 30" gltf-model="#monitor_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
        <a-image position="1 1.25 0.82" rotation="0 180 0" src="#constellation_img" width="1" height="0.6"></a-image>
        <a-entity id="constellationSheet"
        circles-artefact="inspectScale: 3 3 3; inspectRotation: 90 0 0;
            label_on: false;
            description_on: false;"
         rotation="0 180 0" position="-1 0.8 1" circles-interactive-object="type:highlight" gltf-model="#constellation_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
    
      <!-- terminal -->
      <a-entity position="4.6 0.15 4.8" geometry="primitive:box; height:1.3; width:1.2; depth:2.2;" material="color:gray;" circles-sphere-env-map="src:#skyMap" shadow="case:true; receive:true;"></a-entity>
          <a-entity id="terminal" position="4.6 0.8 4.6" rotation="0 -90 0" scale="50 50 50" gltf-model="#terminal_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:true;"></a-entity>
          
          <a-entity id="lighthouseButton" position="4.6 0.8 5.5" geometry="primitive:cylinder; height:0.3; radius:0.2;" material="color:green;" circles-sphere-env-map="src:#skyMap" shadow="case:true; receive:true;" circles-interactive-object="type:highlight" onclick="lighton()"></a-entity>
          <a-entity id="buttonCover" position="4.6 0.8 5.5" geometry="primitive:box; height:0.4; width:0.5; depth:0.5;" material="color:rgb(200, 200, 255); opacity:0.7;" circles-sphere-env-map="src:#skyMap" shadow="case:true; receive:true;" visible="true"></a-entity>
          <a-entity id="key" create-pinpad="digits: 4; numPins: 3; firstAnswer: 1049; secondAnswer: 6062; thirdAnswer: 0120; linkobj: terminal;" position="4.185 1.230 4.529" rotation="0 -90 0" scale="50 50 7" gltf-model="#keyPad_model" circles-sphere-env-map="src:#skyMap" shadow="cast:false; receive:false;" circles-interactive-object="type:highlight"></a-entity>

      <!-- sky box -->
      <a-entity id='skyBox' rotation='0 200 0' geometry='primitive:sphere; radius:50; segments-height:24; segments-width:24;' material='shader:flat; src:#skyMap; side:back;'></a-entity>

    </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
<!--circles-pickup-networked circles-artefact="inspectScale:30 30 30; inspectRotation:0 0 0; inspectPosition:1 -0.5 1.3;"-->